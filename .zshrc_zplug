source ~/.zplug/init.zsh

export ZPLUG_USE_CACHE=true
export ZPLUG_THREADS=4

zplug 'zplug/zplug', hook-build:'zplug --self-manage'
zplug "zsh-users/zsh-syntax-highlighting"
zplug "peterhurford/git-aliases.zsh"
zplug "zsh-users/zsh-autosuggestions"
zplug "themes/agnoster", from:oh-my-zsh
zplug "horta/transfer"
zplug "zsh-users/zsh-history-substring-search"
zplug "paulirish/git-open", as:plugin

if ! zplug check --verbose; then
    printf "Install? [y/N]: "
    if read -q; then
        echo; zplug install
    fi
fi

zplug load

# Compile .zshrc if necessary
# https://github.com/NigoroJr/dotfiles/blob/master/zsh/zshrc
if [ ! -f ~/.zshrc.zwc -o ~/.zshrc -nt ~/.zshrc.zwc ]; then
    zcompile ~/.zshrc
fi

zcd_="$HOME/.zcompdump"
if [[ -s "$zcd_" && (! -s "${zcd_}.zwc" || "$zcd_" -nt "${zcd_}.zwc") ]]; then
    zcompile "$zcd_"
fi
